{"generator":"Code Snippets v2.14.2","date_created":"2021-10-07 13:39","snippets":[{"name":"add_personage","desc":"Plugin requerido, donde esta el formulario para la adici\u00f3n de un personaje a una o varias pel\u00edculas","tags":["shortcode"],"scope":"global","code":"function add_personage () {\n$args_Movies = array(\n    'post_type' => 'post',\n    'orderby'   => 'title',\n\t'category_name' => 'peliculas',\n    );\n\t\n$args_Actors = array(\n    'post_type' => 'post',\n    'orderby'   => 'title',\n\t'category_name' => 'actores',\n    );\n \n$the_query_Movies = new WP_Query( $args_Movies );\n$the_query_Actors = new WP_Query( $args_Actors );\n\t\n$string = '';\t\n\t\nif ( $the_query_Actors->have_posts() ) {\n\t\n\t$string .= '<form  method=\"post\" action=\"' .esc_url( admin_url('admin-post.php') ). '\" name=\"formularito\">';\n\t$string .= '<div class=\"form-group\">';\n\t$string .= '<label class=\"addpersonage\">Nombre del personaje:<\/label>';\n\t$string .= '<input class=\"addpersonage\" type=\"text\" id=\"name\" name=\"name\" required>';\n\t$string .= '<\/div>';\n \t\n\t$string .= '<div class=\"form-group\">';\n\t$string .= '<br><label class=\"addpersonage\">Seleccione el actor que lo interpreta:<\/label>';\n\t$string .= '<select class=\"addpersonage\" name=\"selectActors\" id=\"selectActors\" required>';\n    while ( $the_query_Actors->have_posts() ) {\n        $the_query_Actors->the_post();\n        $string .= '<option value=\"'.get_the_title().'\">'.get_the_title().'<\/option>';\n    }\n    $string .= '<\/select>';\n\t$string .= '<\/div>';\n\t\n\t$string .= '<div class=\"form-group\">';\n\t$string .= '<br><label class=\"addpersonage\">Seleccione las peliculas en la que es est\u00e9 personaje: (mantenga presionado control para seleccionar varias)<\/label>';\n\t$string .= '<select class=\"addpersonage\" name=\"selectMovies[]\" id=\"selectMovies\" multiple >';\n    while ( $the_query_Movies->have_posts() ) {\n        $the_query_Movies->the_post();\n        $string .= '<option value=\"'.get_the_title().'\">'.get_the_title().'<\/option>';\n    }\n    $string .= '<\/select>';\n\t$string .= '<\/div>';\n\t$string .= '<input type=\"hidden\" name=\"action\" value=\"contacto\">';\n\t$string .= '<input class=\"addpersonage\" name=\"send\" value=\"Enviar\" type=\"submit\"><\/from>';\n\t\n    \/* Restore original Post Data *\/\n    wp_reset_postdata();\n} else {\n \n\t$string .= 'no posts found';\n}\n \n \nreturn $string;\n} \n\n\n\/\/ Ejecutamos nuestro funcion en WordPress\nadd_shortcode('add-personage','add_personage');\nadd_filter('widget_text', 'do_shortcode'); \n\n\n","priority":"10"}]}