{"generator":"Code Snippets v2.14.2","date_created":"2021-10-07 13:39","snippets":[{"name":"reparto","desc":"Mostrara en los post categor\u00eda pel\u00edculas, los actores que participaron en ella","scope":"global","code":"function add_content_movies($content){ \n    \n    if ( !is_singular('post') ) return $content;\t\n\t\n\tglobal $wpdb;\n\t$pelicula = the_title ('','',false);\n\t$registros = $wpdb->get_results( \"SELECT nombre, actor,pelicula FROM wp_personage WHERE pelicula = '\".$pelicula.\"'\");\n\t\n\t$cad\t\t\t= \"\";\n\t$template_li \t= '<li>\n\t\t\t\t\t\t\t<a class=\"thumb_rel\" href=\"{url}\">{thumb}<\/a>\n\t\t\t\t\t\t\t<a class=\"title_rel\" href=\"{url}\">{title}<\/a>\n\t\t\t\t\t\t<\/li>';\n\t$template_rel\t= '<div class=\"rel_posts\">\n\t\t\t\t\t\t\t<h3>Reparto<\/h3>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{list}\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t   <\/div>';\n\n\n    $loop\t= new WP_QUERY(array(\n    \t\t\t\t'category_name' => 'actores',\n\t\t\t\t\t\n    \t\t\t\t));\n\n    if ( $loop->have_posts() )\n    {\n\t\n    \twhile ( $loop->have_posts() )\n    \t{\n    \t\t$loop->the_post();\n\t\t\t\tfor ($i=0;$i<count($registros);$i++) {  \n\t\t\t\t\/\/print_r($);\n\t\t\t\tif($registros[$i]->actor == get_the_title())\n\t\t\t\t{\n\t\t\t\t$search\t = Array('{url}','{thumb}','{title}');\n\t\t\t\t$replace = Array(get_permalink(),get_the_post_thumbnail(),get_the_title().\"(\".$registros[$i]->nombre.\")\");\n\t\t\t\n\n\t\t\t\t$cad .= str_replace($search,$replace, $template_li);\n\t\t\t\t}\n\t\t\t\t}\n\t\t}\n    \tif ( $cad ) \n    \t{\n\t\t  \t$content .= str_replace('{list}', $cad, $template_rel);\n    \t}\n\n    }\n   \twp_reset_query();\n\n    return $content;\n}\n\nadd_filter( 'the_content','add_content_movies');","priority":"10"}]}